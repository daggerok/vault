plugins {
    id 'java'
    id 'idea'
    id 'eclipse'
    // gradle build taskTree
    id 'com.dorongold.task-tree' version '1.2.2'
    // gradle dependencyUpdates -Drevision=release
    id 'com.github.ben-manes.versions' version '0.13.0'
    id 'org.springframework.boot' version '1.5.1.RELEASE'
    id 'io.spring.dependency-management' version '1.0.0.RC2'
}

allprojects {
    apply plugin: 'java'
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'

    springBoot { executable = true }

    jar { version = '0.0.1' }

    targetCompatibility = sourceCompatibility = JavaVersion.VERSION_1_8

    repositories { jcenter() }

    dependencies {
        compileOnly('org.projectlombok:lombok')
        compile('org.springframework.boot:spring-boot-starter-web')
        compile('org.springframework.boot:spring-boot-starter-actuator')
        runtime('org.springframework.boot:spring-boot-devtools')
        testCompile('org.springframework.boot:spring-boot-starter-test')
    }

    bootRun { systemProperties = System.properties }
}

dependencies {
    compileOnly project(':fallback')
    compileOnly project(':vault-backend')
    compileOnly project(':vault-client')
}

apply from: "$rootDir/docker/docker.gradle"

task wrapper(type: Wrapper) { gradleVersion = '3.3' }
